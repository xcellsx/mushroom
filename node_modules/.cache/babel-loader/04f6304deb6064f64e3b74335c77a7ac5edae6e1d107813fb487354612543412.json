{"ast":null,"code":"'use strict';\n\nmodule.exports = IntegratorFactory;\nvar Integrator = function Integrator(y0, deriv, t, dt) {\n  // Bind variables to this:\n  this.deriv = deriv;\n  this.y = y0;\n  this.n = this.y.length;\n  this.dt = dt;\n  this.t = t;\n\n  // Create a scratch array into which we compute the derivative:\n  this._ctor = this.y.constructor;\n  this._w = new this._ctor(this.n);\n  this._k1 = new this._ctor(this.n);\n  this._k2 = new this._ctor(this.n);\n  this._k3 = new this._ctor(this.n);\n  this._k4 = new this._ctor(this.n);\n};\nIntegrator.prototype.step = function () {\n  this.deriv(this._k1, this.y, this.t);\n  for (var i = 0; i < this.n; i++) {\n    this._w[i] = this.y[i] + this._k1[i] * this.dt * 0.5;\n  }\n  this.deriv(this._k2, this._w, this.t + this.dt * 0.5);\n  for (var i = 0; i < this.n; i++) {\n    this._w[i] = this.y[i] + this._k2[i] * this.dt * 0.5;\n  }\n  this.deriv(this._k3, this._w, this.t + this.dt * 0.5);\n  for (var i = 0; i < this.n; i++) {\n    this._w[i] = this.y[i] + this._k3[i] * this.dt;\n  }\n  this.deriv(this._k4, this._w, this.t + this.dt);\n  var dto6 = this.dt / 6.0;\n  for (var i = 0; i < this.n; i++) {\n    this.y[i] += dto6 * (this._k1[i] + 2 * this._k2[i] + 2 * this._k3[i] + this._k4[i]);\n  }\n  this.t += this.dt;\n  return this;\n};\nIntegrator.prototype.steps = function (n) {\n  for (var step = 0; step < n; step++) {\n    this.step();\n  }\n  return this;\n};\nfunction IntegratorFactory(y0, deriv, t, dt) {\n  return new Integrator(y0, deriv, t, dt);\n}","map":{"version":3,"names":["module","exports","IntegratorFactory","Integrator","y0","deriv","t","dt","y","n","length","_ctor","constructor","_w","_k1","_k2","_k3","_k4","prototype","step","i","dto6","steps"],"sources":["D:/sds/node_modules/ode-rk4/lib/index.js"],"sourcesContent":["'use strict'\n\nmodule.exports = IntegratorFactory\n\nvar Integrator = function Integrator( y0, deriv, t, dt ) {\n  // Bind variables to this:\n  this.deriv = deriv\n  this.y = y0\n  this.n = this.y.length\n  this.dt = dt\n  this.t = t\n\n  // Create a scratch array into which we compute the derivative:\n  this._ctor = this.y.constructor\n\n  this._w = new this._ctor( this.n )\n  this._k1 = new this._ctor( this.n )\n  this._k2 = new this._ctor( this.n )\n  this._k3 = new this._ctor( this.n )\n  this._k4 = new this._ctor( this.n )\n}\n\nIntegrator.prototype.step = function() {\n\n  this.deriv( this._k1, this.y, this.t )\n\n  for(var i=0; i<this.n; i++) {\n    this._w[i] = this.y[i] + this._k1[i] * this.dt * 0.5\n  }\n\n  this.deriv( this._k2, this._w, this.t + this.dt * 0.5 )\n\n  for(var i=0; i<this.n; i++) {\n    this._w[i] = this.y[i] + this._k2[i] * this.dt * 0.5\n  }\n\n  this.deriv( this._k3, this._w, this.t + this.dt * 0.5 )\n\n  for(var i=0; i<this.n; i++) {\n    this._w[i] = this.y[i] + this._k3[i] * this.dt\n  }\n\n  this.deriv( this._k4, this._w, this.t + this.dt)\n\n\n  var dto6 = this.dt / 6.0\n  for(var i=0; i<this.n; i++) {\n    this.y[i] += dto6 * ( this._k1[i] + 2*this._k2[i] + 2*this._k3[i] + this._k4[i] )\n  }\n\n  this.t += this.dt\n  return this\n}\n\nIntegrator.prototype.steps = function( n ) {\n  for(var step=0; step<n; step++) {\n    this.step()\n  }\n  return this\n}\n\nfunction IntegratorFactory( y0, deriv, t, dt ) {\n  return new Integrator( y0, deriv, t, dt )\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}