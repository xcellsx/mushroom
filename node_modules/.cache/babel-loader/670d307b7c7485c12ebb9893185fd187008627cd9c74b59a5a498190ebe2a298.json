{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\celst\\\\sds\\\\src\\\\components\\\\GrowthReport.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { Pie } from 'react-chartjs-2'; // Import Pie chart\nimport { Chart as ChartJS, ArcElement,\n// Needed for Pie chart\nTooltip, Legend, Title } from 'chart.js';\n\n// Adjust the path to your CSS file as needed\nimport '../styles/GrowthReport.css'; // Assumes this CSS supports the structure\n\n// Register required components for Chart.js\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChartJS.register(ArcElement, Tooltip, Legend, Title);\n\n// --- Helper Function ---\n/**\r\n * Formats a date string (YYYY-MM-DD) to DD-MM-YYYY.\r\n * @param {string} dateString - Input date string in format.\r\n * @returns {string} Formatted date string or 'N/A'.\r\n */\nfunction formatDate_DDMMYYYY(dateString) {\n  if (!dateString || dateString === 'N/A' || !/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) {\n    return 'N/A';\n  }\n  try {\n    const [year, month, day] = dateString.split('-');\n    return `${day}-${month}-${year}`;\n  } catch (e) {\n    console.error(\"Error formatting date:\", dateString, e);\n    return 'N/A';\n  }\n}\n\n/**\r\n * GrowthReport Component\r\n * Displays a detailed report for a single growth simulation entry.\r\n */\nconst GrowthReport = () => {\n  _s();\n  var _formatDate_DDMMYYYY, _entryData$endDate, _entryData$date;\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  // State for the report data and derived values\n  const [entryData, setEntryData] = useState(null);\n  const [parsedSubstrate, setParsedSubstrate] = useState({});\n  const [temperature, setTemperature] = useState('N/A');\n  const [ph, setPh] = useState('N/A');\n  const [yieldValue, setYieldValue] = useState(0);\n  const [days, setDays] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [totalSubstrateWeight, setTotalSubstrateWeight] = useState(0);\n\n  // Map internal keys to user-friendly display names for substrate\n  const substrateDisplayNames = {\n    riceBran: 'Rice Bran',\n    corn: 'Corn Cob',\n    sugarcane: 'Sugarcane',\n    sawdust: 'Sawdust'\n  };\n\n  // Effect hook to process the entry data received from navigation state\n  useEffect(() => {\n    setIsLoading(true);\n    setError(null);\n    if (location.state && location.state.entryData) {\n      const data = location.state.entryData;\n      setEntryData(data);\n\n      // --- Parse Substrate ---\n      let substrateDetails = {};\n      let currentTotalWeight = 0;\n      if (data.substrate) {\n        if (typeof data.substrate === 'object') {\n          substrateDetails = data.substrate;\n        } else if (typeof data.substrate === 'string') {\n          try {\n            substrateDetails = JSON.parse(data.substrate);\n            if (typeof substrateDetails !== 'object' || substrateDetails === null) {\n              substrateDetails = {};\n            }\n          } catch (e) {\n            console.error(\"Failed to parse substrate JSON string:\", e);\n            setError(\"Failed to parse substrate data.\");\n            substrateDetails = {};\n          }\n        }\n        currentTotalWeight = Object.values(substrateDetails).reduce((sum, weight) => sum + (Number(weight) || 0), 0);\n      }\n      setParsedSubstrate(substrateDetails);\n      setTotalSubstrateWeight(currentTotalWeight);\n\n      // --- Parse Conditions (Temp & pH) ---\n      let tempVal = 'N/A';\n      let phVal = 'N/A';\n      if (data.conditions && typeof data.conditions === 'string') {\n        const tempMatch = data.conditions.match(/Temp:\\s*([\\d.]+)/);\n        const phMatch = data.conditions.match(/pH:\\s*([\\d.]+)/);\n        if (tempMatch && tempMatch[1]) tempVal = tempMatch[1];\n        if (phMatch && phMatch[1]) phVal = phMatch[1];\n      }\n      setTemperature(tempVal);\n      setPh(phVal);\n\n      // --- Set Yield and Days ---\n      setYieldValue(Number(data.yield) || 0);\n      setDays(Number(data.days) || 0);\n      setIsLoading(false);\n    } else {\n      console.error(\"No entry data found in navigation state.\");\n      setError(\"Could not load report data. Please go back to history and select an entry.\");\n      setIsLoading(false);\n    }\n  }, [location.state]);\n  const handleBackClick = () => navigate('/growth-history');\n  const handleHomeClick = () => navigate('/');\n  const handleSaveReport = () => alert(\"Save report functionality not implemented.\");\n  const handleDeleteReport = () => alert(\"Delete report functionality not implemented.\");\n\n  // --- Pie Chart Configuration ---\n  const pieOptions = {\n    responsive: true,\n    maintainAspectRatio: false,\n    // Important for sizing within container\n    plugins: {\n      legend: {\n        position: 'bottom',\n        labels: {\n          color: 'var(--brown)',\n          // Use CSS variable for color\n          font: {\n            size: 11,\n            family: \"'Lexend', sans-serif\"\n          },\n          // Slightly smaller font\n          boxWidth: 12,\n          padding: 10\n        }\n      },\n      tooltip: {\n        bodyFont: {\n          family: \"'Lexend', sans-serif\"\n        },\n        titleFont: {\n          family: \"'Lexend', sans-serif\"\n        },\n        callbacks: {\n          label: function (context) {\n            let label = context.label || '';\n            if (label) {\n              label += ': ';\n            }\n            if (context.parsed !== null && totalSubstrateWeight > 0) {\n              // Avoid division by zero\n              const percentage = (context.parsed / totalSubstrateWeight * 100).toFixed(1);\n              label += `${context.raw}g (${percentage}%)`;\n            } else if (context.raw !== null) {\n              label += `${context.raw}g`; // Show grams if percentage can't be calculated\n            }\n            return label;\n          }\n        }\n      },\n      title: {\n        display: false\n      } // Title displayed by section H3\n    }\n  };\n  const pieData = {\n    labels: Object.keys(parsedSubstrate).map(key => substrateDisplayNames[key] || key),\n    datasets: [{\n      data: totalSubstrateWeight > 0 ? Object.values(parsedSubstrate).map(v => Number(v) || 0) : [1],\n      // Placeholder data\n      backgroundColor: totalSubstrateWeight > 0 ? ['#f3f2a4', '#c5e99b', '#a56a2a', '#f0a008'] // Theme colors\n      : ['#cccccc'],\n      // Placeholder color\n      borderColor: 'var(--white)',\n      // Use CSS variable for border\n      borderWidth: totalSubstrateWeight > 0 ? 2 : 0\n    }]\n  };\n  // --- End Pie Chart Configuration ---\n\n  // --- Render Logic ---\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"growth-report loading\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading report...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 68\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }, this);\n  }\n  if (error || !entryData) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"growth-report error-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"report-header\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"back-button\",\n          onClick: handleBackClick,\n          children: \" \\u2190 \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 53\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Error\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 129\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"report-content\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-message\",\n          children: error || \"Report data not found.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 52\n        }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"home-button\",\n          onClick: handleHomeClick,\n          children: \" Home \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 121\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }, this);\n  }\n\n  // --- Main component render ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"growth-report\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"report-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"back-button\",\n        onClick: handleBackClick,\n        title: \"Back to History\",\n        children: \" \\u2190 \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Growth Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }, this), entryData.batchName && entryData.batchName !== 'N/A' && /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"batch-name-display\",\n        children: entryData.batchName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"home-button-header\",\n        onClick: handleHomeClick,\n        title: \"Go to Home Page\",\n        children: \" Home \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"report-content-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"report-left-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"report-section substrate-pie-chart\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Substrate Composition (%)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pie-chart-container\",\n            children: [\" \", totalSubstrateWeight > 0 ? /*#__PURE__*/_jsxDEV(Pie, {\n              data: pieData,\n              options: pieOptions\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 214,\n              columnNumber: 33\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"pie-chart-placeholder\",\n              children: \"No substrate data to display chart.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 22\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"report-section environmental-conditions\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Environmental Conditions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"condition-item\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Temperature:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 58\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [temperature, \"\\xB0C\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 84\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"condition-item\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"pH:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 58\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: ph\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 75\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"condition-item\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Duration:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 58\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [days, \" days\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 228,\n              columnNumber: 81\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"report-right-column\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"report-section substrate-composition-details\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Substrate Composition (g)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 25\n          }, this), Object.entries(parsedSubstrate).length > 0 ? Object.entries(parsedSubstrate).map(([key, value]) => {\n            const displayName = substrateDisplayNames[key] || key.charAt(0).toUpperCase() + key.slice(1);\n            const amount = Number(value);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"substrate-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [displayName, \":\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: isNaN(amount) ? value : amount + 'g'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 245,\n                columnNumber: 41\n              }, this)]\n            }, key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 37\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"No substrate details available.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"substrate-item total-weight\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: \"Total Weight:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 35\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 253,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: /*#__PURE__*/_jsxDEV(\"b\", {\n                children: [totalSubstrateWeight, \"g\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 254,\n                columnNumber: 35\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 26\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"report-section results-summary\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Results\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-item\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Projected Yield:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 56\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [yieldValue, \"g\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 86\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 26\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-item\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Start Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 56\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: (_formatDate_DDMMYYYY = formatDate_DDMMYYYY(entryData.startDate)) !== null && _formatDate_DDMMYYYY !== void 0 ? _formatDate_DDMMYYYY : 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 81\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 26\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-item\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"End Date:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 56\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: (_entryData$endDate = entryData.endDate) !== null && _entryData$endDate !== void 0 ? _entryData$endDate : 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 79\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 26\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"result-item\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \"Date Saved:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 56\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n              children: (_entryData$date = entryData.date) !== null && _entryData$date !== void 0 ? _entryData$date : 'N/A'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 81\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 26\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"report-section simulation-charts-placeholder\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Simulation Curves\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"(Detailed simulation line charts require full time-series data which is not available in this report summary).\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 22\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n      className: \"report-footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"save-report-button\",\n        onClick: handleSaveReport,\n        children: \"Save Report\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"delete-report-button\",\n        onClick: handleDeleteReport,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 9\n  }, this);\n};\n_s(GrowthReport, \"d8WRGjBZHBH2Ft64DbQ4AEbLK4w=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = GrowthReport;\nexport default GrowthReport;\nvar _c;\n$RefreshReg$(_c, \"GrowthReport\");","map":{"version":3,"names":["React","useEffect","useState","useLocation","useNavigate","Pie","Chart","ChartJS","ArcElement","Tooltip","Legend","Title","jsxDEV","_jsxDEV","register","formatDate_DDMMYYYY","dateString","test","year","month","day","split","e","console","error","GrowthReport","_s","_formatDate_DDMMYYYY","_entryData$endDate","_entryData$date","navigate","location","entryData","setEntryData","parsedSubstrate","setParsedSubstrate","temperature","setTemperature","ph","setPh","yieldValue","setYieldValue","days","setDays","isLoading","setIsLoading","setError","totalSubstrateWeight","setTotalSubstrateWeight","substrateDisplayNames","riceBran","corn","sugarcane","sawdust","state","data","substrateDetails","currentTotalWeight","substrate","JSON","parse","Object","values","reduce","sum","weight","Number","tempVal","phVal","conditions","tempMatch","match","phMatch","yield","handleBackClick","handleHomeClick","handleSaveReport","alert","handleDeleteReport","pieOptions","responsive","maintainAspectRatio","plugins","legend","position","labels","color","font","size","family","boxWidth","padding","tooltip","bodyFont","titleFont","callbacks","label","context","parsed","percentage","toFixed","raw","title","display","pieData","keys","map","key","datasets","v","backgroundColor","borderColor","borderWidth","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","batchName","options","entries","length","value","displayName","charAt","toUpperCase","slice","amount","isNaN","startDate","endDate","date","_c","$RefreshReg$"],"sources":["C:/Users/celst/sds/src/components/GrowthReport.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport { Pie } from 'react-chartjs-2'; // Import Pie chart\r\nimport {\r\n    Chart as ChartJS,\r\n    ArcElement, // Needed for Pie chart\r\n    Tooltip,\r\n    Legend,\r\n    Title,\r\n} from 'chart.js';\r\n\r\n// Adjust the path to your CSS file as needed\r\nimport '../styles/GrowthReport.css'; // Assumes this CSS supports the structure\r\n\r\n// Register required components for Chart.js\r\nChartJS.register(ArcElement, Tooltip, Legend, Title);\r\n\r\n// --- Helper Function ---\r\n/**\r\n * Formats a date string (YYYY-MM-DD) to DD-MM-YYYY.\r\n * @param {string} dateString - Input date string in format.\r\n * @returns {string} Formatted date string or 'N/A'.\r\n */\r\nfunction formatDate_DDMMYYYY(dateString) {\r\n    if (!dateString || dateString === 'N/A' || !/^\\d{4}-\\d{2}-\\d{2}$/.test(dateString)) {\r\n        return 'N/A';\r\n    }\r\n    try {\r\n        const [year, month, day] = dateString.split('-');\r\n        return `${day}-${month}-${year}`;\r\n    } catch (e) {\r\n        console.error(\"Error formatting date:\", dateString, e);\r\n        return 'N/A';\r\n    }\r\n}\r\n\r\n/**\r\n * GrowthReport Component\r\n * Displays a detailed report for a single growth simulation entry.\r\n */\r\nconst GrowthReport = () => {\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n\r\n    // State for the report data and derived values\r\n    const [entryData, setEntryData] = useState(null);\r\n    const [parsedSubstrate, setParsedSubstrate] = useState({});\r\n    const [temperature, setTemperature] = useState('N/A');\r\n    const [ph, setPh] = useState('N/A');\r\n    const [yieldValue, setYieldValue] = useState(0);\r\n    const [days, setDays] = useState(0);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n    const [totalSubstrateWeight, setTotalSubstrateWeight] = useState(0);\r\n\r\n    // Map internal keys to user-friendly display names for substrate\r\n    const substrateDisplayNames = {\r\n        riceBran: 'Rice Bran',\r\n        corn: 'Corn Cob',\r\n        sugarcane: 'Sugarcane',\r\n        sawdust: 'Sawdust',\r\n    };\r\n\r\n    // Effect hook to process the entry data received from navigation state\r\n    useEffect(() => {\r\n        setIsLoading(true);\r\n        setError(null);\r\n\r\n        if (location.state && location.state.entryData) {\r\n            const data = location.state.entryData;\r\n            setEntryData(data);\r\n\r\n            // --- Parse Substrate ---\r\n            let substrateDetails = {};\r\n            let currentTotalWeight = 0;\r\n            if (data.substrate) {\r\n                if (typeof data.substrate === 'object') {\r\n                    substrateDetails = data.substrate;\r\n                } else if (typeof data.substrate === 'string') {\r\n                    try {\r\n                        substrateDetails = JSON.parse(data.substrate);\r\n                        if (typeof substrateDetails !== 'object' || substrateDetails === null) {\r\n                            substrateDetails = {};\r\n                        }\r\n                    } catch (e) {\r\n                        console.error(\"Failed to parse substrate JSON string:\", e);\r\n                        setError(\"Failed to parse substrate data.\");\r\n                        substrateDetails = {};\r\n                    }\r\n                }\r\n                 currentTotalWeight = Object.values(substrateDetails).reduce((sum, weight) => sum + (Number(weight) || 0), 0);\r\n            }\r\n            setParsedSubstrate(substrateDetails);\r\n            setTotalSubstrateWeight(currentTotalWeight);\r\n\r\n\r\n            // --- Parse Conditions (Temp & pH) ---\r\n            let tempVal = 'N/A';\r\n            let phVal = 'N/A';\r\n            if (data.conditions && typeof data.conditions === 'string') {\r\n                const tempMatch = data.conditions.match(/Temp:\\s*([\\d.]+)/);\r\n                const phMatch = data.conditions.match(/pH:\\s*([\\d.]+)/);\r\n                if (tempMatch && tempMatch[1]) tempVal = tempMatch[1];\r\n                if (phMatch && phMatch[1]) phVal = phMatch[1];\r\n            }\r\n            setTemperature(tempVal);\r\n            setPh(phVal);\r\n\r\n            // --- Set Yield and Days ---\r\n            setYieldValue(Number(data.yield) || 0);\r\n            setDays(Number(data.days) || 0);\r\n\r\n            setIsLoading(false);\r\n        } else {\r\n            console.error(\"No entry data found in navigation state.\");\r\n            setError(\"Could not load report data. Please go back to history and select an entry.\");\r\n            setIsLoading(false);\r\n        }\r\n    }, [location.state]);\r\n\r\n    const handleBackClick = () => navigate('/growth-history');\r\n    const handleHomeClick = () => navigate('/');\r\n    const handleSaveReport = () => alert(\"Save report functionality not implemented.\");\r\n    const handleDeleteReport = () => alert(\"Delete report functionality not implemented.\");\r\n\r\n    // --- Pie Chart Configuration ---\r\n    const pieOptions = {\r\n        responsive: true,\r\n        maintainAspectRatio: false, // Important for sizing within container\r\n        plugins: {\r\n            legend: {\r\n                position: 'bottom',\r\n                labels: {\r\n                    color: 'var(--brown)', // Use CSS variable for color\r\n                    font: { size: 11, family: \"'Lexend', sans-serif\" }, // Slightly smaller font\r\n                    boxWidth: 12,\r\n                    padding: 10\r\n                }\r\n            },\r\n            tooltip: {\r\n                bodyFont: { family: \"'Lexend', sans-serif\" },\r\n                titleFont: { family: \"'Lexend', sans-serif\" },\r\n                 callbacks: {\r\n                    label: function(context) {\r\n                        let label = context.label || '';\r\n                        if (label) { label += ': '; }\r\n                        if (context.parsed !== null && totalSubstrateWeight > 0) { // Avoid division by zero\r\n                            const percentage = ((context.parsed / totalSubstrateWeight) * 100).toFixed(1);\r\n                            label += `${context.raw}g (${percentage}%)`;\r\n                        } else if (context.raw !== null) {\r\n                             label += `${context.raw}g`; // Show grams if percentage can't be calculated\r\n                        }\r\n                        return label;\r\n                    }\r\n                }\r\n            },\r\n             title: { display: false } // Title displayed by section H3\r\n        },\r\n    };\r\n\r\n    const pieData = {\r\n        labels: Object.keys(parsedSubstrate).map(key => substrateDisplayNames[key] || key),\r\n        datasets: [\r\n            {\r\n                data: totalSubstrateWeight > 0\r\n                    ? Object.values(parsedSubstrate).map(v => Number(v) || 0)\r\n                    : [1], // Placeholder data\r\n                backgroundColor: totalSubstrateWeight > 0\r\n                    ? ['#f3f2a4', '#c5e99b', '#a56a2a', '#f0a008'] // Theme colors\r\n                    : ['#cccccc'], // Placeholder color\r\n                borderColor: 'var(--white)', // Use CSS variable for border\r\n                borderWidth: totalSubstrateWeight > 0 ? 2 : 0,\r\n            },\r\n        ],\r\n    };\r\n    // --- End Pie Chart Configuration ---\r\n\r\n\r\n    // --- Render Logic ---\r\n    if (isLoading) { return <div className=\"growth-report loading\"><p>Loading report...</p></div>; }\r\n    if (error || !entryData) {\r\n        return (\r\n            <div className=\"growth-report error-page\">\r\n                 <header className=\"report-header\"> <button className=\"back-button\" onClick={handleBackClick}> &larr; </button> <h1>Error</h1> </header>\r\n                 <main className=\"report-content\"> <p className=\"error-message\">{error || \"Report data not found.\"}</p> <button className=\"home-button\" onClick={handleHomeClick}> Home </button> </main>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // --- Main component render ---\r\n    return (\r\n        <div className=\"growth-report\">\r\n            {/* Header */}\r\n            <header className=\"report-header\">\r\n                 {/* Removed empty logo divs */}\r\n                <button className=\"back-button\" onClick={handleBackClick} title=\"Back to History\"> &larr; </button>\r\n                <h1>Growth Report</h1>\r\n                {entryData.batchName && entryData.batchName !== 'N/A' && (\r\n                    <span className=\"batch-name-display\">{entryData.batchName}</span>\r\n                )}\r\n                 <button className=\"home-button-header\" onClick={handleHomeClick} title=\"Go to Home Page\"> Home </button>\r\n            </header>\r\n\r\n            {/* Main Content Area */}\r\n            <main className=\"report-content-grid\">\r\n\r\n                {/* Left Column/Area */}\r\n                <div className=\"report-left-column\">\r\n                     {/* Substrate Pie Chart Section */}\r\n                     <div className=\"report-section substrate-pie-chart\">\r\n                        <h3>Substrate Composition (%)</h3>\r\n                        <div className=\"pie-chart-container\"> {/* Ensure this container has height/width set in CSS */}\r\n                           {totalSubstrateWeight > 0 ? (\r\n                                <Pie data={pieData} options={pieOptions} />\r\n                           ) : (\r\n                                <p className=\"pie-chart-placeholder\">\r\n                                    No substrate data to display chart.\r\n                                </p>\r\n                           )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Environmental Conditions Section */}\r\n                    <div className=\"report-section environmental-conditions\">\r\n                        <h3>Environmental Conditions</h3>\r\n                        <div className=\"condition-item\"> <span>Temperature:</span> <span>{temperature}Â°C</span> </div>\r\n                        <div className=\"condition-item\"> <span>pH:</span> <span>{ph}</span> </div>\r\n                        <div className=\"condition-item\"> <span>Duration:</span> <span>{days} days</span> </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {/* Right Column/Area */}\r\n                <div className=\"report-right-column\">\r\n                    {/* Substrate Composition Details Section */}\r\n                    <div className=\"report-section substrate-composition-details\">\r\n                        <h3>Substrate Composition (g)</h3>\r\n                        {Object.entries(parsedSubstrate).length > 0 ? (\r\n                            Object.entries(parsedSubstrate).map(([key, value]) => {\r\n                                const displayName = substrateDisplayNames[key] || key.charAt(0).toUpperCase() + key.slice(1);\r\n                                const amount = Number(value);\r\n                                return (\r\n                                    <div key={key} className=\"substrate-item\">\r\n                                        <span>{displayName}:</span>\r\n                                        <span>{isNaN(amount) ? value : amount + 'g'}</span>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        ) : (\r\n                            <p>No substrate details available.</p>\r\n                        )}\r\n                         <div className=\"substrate-item total-weight\">\r\n                            <span><b>Total Weight:</b></span>\r\n                            <span><b>{totalSubstrateWeight}g</b></span>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Results Section */}\r\n                    <div className=\"report-section results-summary\">\r\n                        <h3>Results</h3>\r\n                         <div className=\"result-item\"> <span>Projected Yield:</span> <span>{yieldValue}g</span> </div>\r\n                         <div className=\"result-item\"> <span>Start Date:</span> <span>{formatDate_DDMMYYYY(entryData.startDate) ?? 'N/A'}</span> </div>\r\n                         <div className=\"result-item\"> <span>End Date:</span> <span>{entryData.endDate ?? 'N/A'}</span> </div>\r\n                         <div className=\"result-item\"> <span>Date Saved:</span> <span>{entryData.date ?? 'N/A'}</span> </div>\r\n                    </div>\r\n\r\n                    {/* Placeholder explaining missing line charts */}\r\n                     <div className=\"report-section simulation-charts-placeholder\">\r\n                        <h3>Simulation Curves</h3>\r\n                        <p>(Detailed simulation line charts require full time-series data which is not available in this report summary).</p>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </main>\r\n\r\n             {/* Footer Buttons Area */}\r\n            <footer className=\"report-footer\">\r\n                 <button className=\"save-report-button\" onClick={handleSaveReport}>Save Report</button>\r\n                 <button className=\"delete-report-button\" onClick={handleDeleteReport}>Delete</button>\r\n            </footer>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GrowthReport;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}